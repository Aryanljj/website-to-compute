<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Book ðŸ’¬ | Made by Aryy & Hirdesh</title>
<style>
:root {
  --bg1: #ff758c;
  --bg2: #ff7eb3;
  --header: #ff3366;
  --msg-right: #ff9db6;
  --msg-left: #ffe6ee;
  --text-color: #000;
}

body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  overflow: hidden;
  color: var(--text-color);
}

/* ===== HEADER ===== */
.top-banner {
  position: fixed;
  top: 0;
  width: 100%;
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(10px);
  text-align: center;
  padding: 12px;
  font-size: 22px;
  color: white;
  font-weight: bold;
  letter-spacing: 1px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  z-index: 100;
}

/* ===== INTRO CARD ===== */
.container {
  text-align: center;
  background: rgba(255,255,255,0.9);
  padding: 30px;
  border-radius: 25px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  width: 340px;
  margin-top: 80px;
  animation: fadeIn 1s ease;
}

@keyframes fadeIn {
  from {opacity: 0; transform: translateY(20px);}
  to {opacity: 1; transform: translateY(0);}
}

h2 {
  color: var(--header);
  margin-bottom: 15px;
  font-size: 1.5em;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

input[type="file"],
input[type="text"] {
  width: 85%;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid var(--header);
  margin: 6px 0;
  outline: none;
  font-size: 14px;
  text-align: center;
  background: #fff0f6;
}

button {
  background: var(--header);
  color: white;
  border: none;
  border-radius: 12px;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 16px;
  transition: 0.3s;
  margin: 6px;
}
button:hover {transform: scale(1.05);}

/* ===== CHAT BOX ===== */
.chat-box {
  width: 370px;
  height: 620px;
  background: white;
  border-radius: 25px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
  display: none;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  margin-top: 90px;
}

.header {
  background: var(--header);
  color: white;
  text-align: center;
  padding: 15px;
  font-size: 1.1em;
  font-weight: bold;
  letter-spacing: 1px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  position: relative;
}

.header img {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid white;
}

.theme-btn, .clear-btn {
  position: absolute;
  top: 10px;
  background: white;
  color: var(--header);
  border: 2px solid var(--header);
  border-radius: 8px;
  font-size: 12px;
  cursor: pointer;
  padding: 4px 8px;
}
.theme-btn { right: 10px; }
.clear-btn { left: 10px; }

.messages {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  background: #fff6f9;
}

.msg {
  padding: 10px 15px;
  border-radius: 15px;
  max-width: 75%;
  font-size: 14px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.left { align-self: flex-start; background: var(--msg-left);}
.right { align-self: flex-end; background: var(--msg-right); color: white;}

.input-area {
  display:flex;
  border-top:2px solid #ffd1dc;
  padding:5px;
  gap:5px;
  background: #fff0f6;
}
.input-area input {
  flex:1;
  border:none;
  padding:10px;
  font-size:14px;
  outline:none;
  border-radius:10px;
  background:#fff;
}

.heart {
  font-size:24px;
  position:absolute;
  animation:floatUp 3s linear infinite;
}
@keyframes floatUp {
  from{transform:translateY(0);opacity:1;}
  to{transform:translateY(-200px);opacity:0;}
}

.save-btn {
  background:#007bff;
  color:white;
  margin:8px;
  border-radius:12px;
  font-weight:bold;
  width:90%;
  align-self:center;
  transition:0.3s;
}
.save-btn:hover{transform:scale(1.05);}
</style>
</head>
<body>

<div class="top-banner">ðŸ’¬ Chat Book â€” Made by Aryy & Hirdesh ðŸ’–</div>

<!-- Name Input Page -->
<div class="container" id="namePage">
  <h2>ðŸ’ž Welcome to Chat Book ðŸ’ž</h2>
  <p style="font-size:13px; color:#555;">Create your cute love chat & save it forever ðŸ’Œ</p>
  <input type="text" id="name1" placeholder="Your Name ðŸ’–">
  <input type="file" id="photo1" accept="image/*">
  <input type="text" id="name2" placeholder="Partner Name ðŸ’˜">
  <input type="file" id="photo2" accept="image/*">
  <button onclick="startChat()">Start Chat</button>
</div>

<!-- Chat Box -->
<div class="chat-box" id="chatBox">
  <div class="header" id="headerNames">
    <button class="clear-btn" onclick="clearChat()">ðŸ§¹</button>
    <img id="img1" src="" alt="">
    <span id="namesText">Chat Book ðŸ’•</span>
    <img id="img2" src="" alt="">
    <button class="theme-btn" onclick="changeTheme()">ðŸŽ¨</button>
  </div>

  <div class="messages" id="messages"></div>

  <div class="input-area">
    <input type="text" id="inputMsg" placeholder="Type message...">
    <button onclick="sendMsg('right')">ðŸ’– You</button>
    <button onclick="sendMsg('left')">ðŸ’˜ Partner</button>
  </div>

  <button class="save-btn" onclick="saveChatFile()">ðŸ’¾ Save Chat (.txt)</button>
</div>

<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2023/02/10/audio_c2d4b8b8be.mp3" type="audio/mpeg">
</audio>

<script>
const chatBox=document.getElementById("chatBox");
const namePage=document.getElementById("namePage");
const headerNames=document.getElementById("namesText");
const bgMusic=document.getElementById("bgMusic");
const messages=document.getElementById("messages");
const input=document.getElementById("inputMsg");
const img1=document.getElementById("img1");
const img2=document.getElementById("img2");

let themeIndex=0;
const themes=[
  {bg1:"#ff758c", bg2:"#ff7eb3", header:"#ff3366", left:"#ffe6ee", right:"#ff9db6", text:"#000"},
  {bg1:"#89f7fe", bg2:"#66a6ff", header:"#1e90ff", left:"#dbeafe", right:"#3399ff", text:"#000"},
  {bg1:"#232526", bg2:"#414345", header:"#000", left:"#333", right:"#555", text:"#fff"}
];

function startChat(){
  const n1=document.getElementById("name1").value.trim();
  const n2=document.getElementById("name2").value.trim();
  const p1=document.getElementById("photo1").files[0];
  const p2=document.getElementById("photo2").files[0];
  if(!n1 || !n2){alert("Enter both names ðŸ’•"); return;}
  if(p1){img1.src=URL.createObjectURL(p1);}
  if(p2){img2.src=URL.createObjectURL(p2);}
  namePage.style.display="none";
  chatBox.style.display="flex";
  headerNames.textContent=`${n1} ðŸ’– ${n2}`;
  bgMusic.play().catch(()=>{});
  loadChat();
}

function sendMsg(side){
  const text=input.value.trim();
  if(!text) return;
  addMessage(side,text);
  input.value="";
  messages.scrollTop=messages.scrollHeight;
  createHeart();
}

function addMessage(side,text){
  const msg=document.createElement("div");
  msg.className="msg "+side;
  msg.textContent=text;
  messages.appendChild(msg);
  saveChat();
}

function createHeart(){
  const heart=document.createElement("div");
  heart.className="heart";
  heart.textContent="ðŸ’–";
  heart.style.left=Math.random()*100+"%";
  heart.style.top="80%";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),3000);
}

function saveChat(){localStorage.setItem("loveChat",messages.innerHTML);}
function loadChat(){const saved=localStorage.getItem("loveChat"); if(saved) messages.innerHTML=saved;}
function clearChat(){if(confirm("Clear chat? ðŸ’”")){localStorage.removeItem("loveChat"); messages.innerHTML="";}}
function changeTheme(){
  themeIndex=(themeIndex+1)%themes.length;
  const t=themes[themeIndex];
  document.documentElement.style.setProperty("--bg1",t.bg1);
  document.documentElement.style.setProperty("--bg2",t.bg2);
  document.documentElement.style.setProperty("--header",t.header);
  document.documentElement.style.setProperty("--msg-left",t.left);
  document.documentElement.style.setProperty("--msg-right",t.right);
  document.documentElement.style.setProperty("--text-color",t.text);
}

function saveChatFile(){
  const allMsgs=[...document.querySelectorAll(".msg")]
    .map(m=>(m.classList.contains("right")?"You ðŸ’–: ":"Partner ðŸ’˜: ")+m.textContent)
    .join("\n");
  const blob=new Blob([allMsgs],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="Chat_Book_Aryy_Hirdesh.txt";
  a.click();
}
</script>
</body>
</html>
